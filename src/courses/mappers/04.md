---
order: 4
next: 05.md
title: Understanding InspecJS & OHDF Converters
author: Charles Hu
---

## What is InspecJS?



## What is OHDF Converters?

OHDF Converters is a custom data normalization library which leverages OHDF mappers for transforming various security data formats to and from OHDF. It is currently integrated into [Heimdall2](https://github.com/mitre/heimdall2) and the [SAF CLI](https://github.com/mitre/saf), which collectively are part of the [Security Automation Framework (SAF)](https://saf.mitre.org/#/), a set of tools and processes which aim to standardize and ease security compliance testing and verification within an automated build pipeline.

### Features

- Leverages OHDF mappers to transform security data formats to and from OHDF.
- Special keyword functions provided by the <i>base-converter</i> class.
- Fingerprinting services for automatic data format identification.

### Keywords

<i>base-converter</i> is an underlying class which enables \*-to-HDF mapping in OHDF Converters. It defines \*-to-HDF mappers and provides critical tools in the form of keywords which allow for the construction of such mappers. All \*-to-HDF mappers inherit from this class and therefore have access to the keywords that this class provides. You should aim to utilize these keywords to their fullest potential to ease and simplify mapper development. The provided tools are as follows:

- `path`: Define JSON object path to go to. Paths are found recursively.
  - Use:
  ```
  path: PATH_AS_STRING
  ```
  - Example:
  ```
  // Attribute 'id' will be set as whatever JSON object attribute 'vulnerability.id' is
  id: {path: 'vulnerability.id'}
  ```

- `transformer`: Execute given code sequence; operates similar to an anonymous function.
  - Use:
  ```
  transformer: (PARAMETER: TYPE): OUTPUT_TYPE => {CODE_TO_EXECUTE}
  ```
  - Example:
  ```
  // Attribute 'code' will be set as the returned stringified JSON object of input 'vulnerability'
  code: {
    transformer: (vulnerability: Record<string, unknown>): string => {
      return JSON.stringify(vulnerability, null, 2);
    }
  }
  ```

- `arrayTransformer`: Execute given code sequence on a given array; primarily used when in an attribute that is an array of objects.
  - Use:
  ```
  arrayTransformer: (PARAMETER: TYPE): OUTPUT_TYPE => {CODE_TO_EXECUTE}
  ```
  - Example:
  ```
  // The function 'deduplicateId' will run against all items in the current array that the 'arrayTransformer' was called inside
  arrayTransformer: deduplicateId
  ```

- `pathTransform`: Converts the JSON object path structure.
  - Use:
  ```
  pathTransform: (PARAMETER: TYPE): OUTPUT_TYPE => {CODE_TO_EXECUTE}
  ```
  - Example:
  ```
  // Returns the JSON path if it is an array, otherwise returns an empty array
  pathTransform: (value) => (Array.isArray(value) ? value : []),
  ```

- `key`: Used by <i>base-converter</i> to sort an array of objects by
  - Use:
  ```
  key: KEY_AS_STRING
  ```
  - Example:
  ```
  // 'id' is now the key by which this array will be sorted by
  key: 'id'
  ```

### Directory Structure

The following is a simplified depiction of the directory tree for the HDF Converter. Only noteworthy and potentially useful files and directories are included. It is not imperative to memorize the structure, but it is useful to familiarize yourself with it to better understand what exists where within the HDF Converter for future reference.

```
hdf-converters
+-- data
|   +-- converters
|   |   +-- csv2json.ts
|   |   +-- xml2json.ts
+-- sample_jsons                              //Sample exports for mapper testing are located here
+-- src                                       //*-to-HDF mappers are located here
|   +-- converters-from-hdf                   //HDF-to-* mappers are located here
|   |   +-- reverse-any-base-converter.ts
|   |   +-- reverse-base-converter.ts
|   +-- mappings                              //Non-HDF mappers are located here (e.g., CVE, CCI, NIST)
|   +-- utils
|   |   +-- fingerprinting.ts
|   |   +-- global.ts
|   +-- base-converter.ts
+-- test                                      //Mapper tests are located here
|   +-- mappers
|   |   +-- forward                           //*-to-HDF tests
|   |   +-- reverse                           //HDF-to-* tests
|   |   +-- utils.ts
+-- types                                     //Explicit data typing for known export schemas
+-- index.ts
+-- package.json
```
