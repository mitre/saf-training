{"version":3,"file":"index.js","sources":["../../src/node/locales.ts","../../src/node/compact.ts","../../src/node/utils.ts","../../src/node/plugin.ts"],"sourcesContent":["import type { CopyCodeLocaleConfig } from \"../shared/index.js\";\n\n/** Multi language config for copy code */\nexport const copyCodeLocales: CopyCodeLocaleConfig = {\n  \"/en/\": {\n    copy: \"Copy code\",\n    copied: \"Copied\",\n    hint: \"Copied successfully\",\n  },\n\n  \"/zh/\": {\n    copy: \"复制代码\",\n    copied: \"已复制\",\n    hint: \"复制成功\",\n  },\n\n  \"/zh-tw/\": {\n    copy: \"複製代碼\",\n    copied: \"已複製\",\n    hint: \"複製成功\",\n  },\n\n  \"/de/\": {\n    copy: \"Kopiere den Code.\",\n    copied: \"Kopiert\",\n    hint: \"Kopieren erfolgreich\",\n  },\n\n  \"/de-at/\": {\n    copy: \"Kopiere den Code.\",\n    copied: \"Kopierter\",\n    hint: \"Kopieren erfolgreich\",\n  },\n\n  \"/vi/\": {\n    copy: \"Sao chép code\",\n    copied: \"Đã sao chép\",\n    hint: \"Sao chép thành công\",\n  },\n\n  \"/uk/\": {\n    copy: \"Скопіюйте код\",\n    copied: \"Скопійовано\",\n    hint: \"Скопіюйте успішно\",\n  },\n\n  \"/ru/\": {\n    copy: \"Скопировать код\",\n    copied: \"Скопировано\",\n    hint: \"Скопировано успешно\",\n  },\n\n  \"/br/\": {\n    copy: \"Copiar o código\",\n    copied: \"Código\",\n    hint: \"Copiado com sucesso\",\n  },\n\n  \"/pl/\": {\n    copy: \"Skopiuj kod\",\n    copied: \"Skopiowane\",\n    hint: \"Skopiowano pomyślnie\",\n  },\n\n  \"/sk/\": {\n    copy: \"Skopíruj kód\",\n    copied: \"Skopírované\",\n    hint: \"Úspešne skopírované\",\n  },\n\n  \"/fr/\": {\n    copy: \"Copier le code\",\n    copied: \"Copié\",\n    hint: \"Copié avec succès\",\n  },\n\n  \"/es/\": {\n    copy: \"Copiar código\",\n    copied: \"Copiado\",\n    hint: \"Copiado con éxito\",\n  },\n\n  \"/ja/\": {\n    copy: \"コードをコピー\",\n    copied: \"コピーしました\",\n    hint: \"コピーに成功しました\",\n  },\n\n  \"/tr/\": {\n    copy: \"Kodu kopyala\",\n    copied: \"Kopyalandı\",\n    hint: \"Başarıyla kopyalandı\",\n  },\n\n  \"/ko/\": {\n    copy: \"코드 복사\",\n    copied: \"복사됨\",\n    hint: \"성공적으로 복사됨\",\n  },\n\n  \"/fi/\": {\n    copy: \"Kopioi koodi\",\n    copied: \"Kopioitu\",\n    hint: \"Kopioitu onnistuneesti\",\n  },\n\n  \"/hu/\": {\n    copy: \"Kód másolása\",\n    copied: \"Másolva\",\n    hint: \"Sikeres másolás\",\n  },\n\n  \"/id/\": {\n    copy: \"Salin kode\",\n    copied: \"Disalin\",\n    hint: \"Kode berhasil disalin\",\n  },\n\n  \"/nl/\": {\n    copy: \"Kopieer code\",\n    copied: \"Gekopieerd\",\n    hint: \"Succesvol gekopieerd\",\n  },\n};\n","import { createConverter } from \"vuepress-shared/node\";\n\n/** @deprecated */\nexport const convertOptions = (options: Record<string, unknown>): void => {\n  const { deprecatedLogger, droppedLogger } = createConverter(\"copy-code2\");\n\n  deprecatedLogger({\n    options,\n    old: \"locale\",\n    new: \"locales\",\n  });\n  droppedLogger({\n    options,\n    old: \"pure\",\n    new: \"fancy\",\n  });\n};\n","import { getDirname, path } from \"@vuepress/utils\";\nimport { Logger, ensureEndingSlash } from \"vuepress-shared/node\";\n\nconst __dirname = getDirname(import.meta.url);\n\nexport const CLIENT_FOLDER = ensureEndingSlash(\n  path.resolve(__dirname, \"../client\"),\n);\n\nexport const PLUGIN_NAME = \"vuepress-plugin-copy-code2\";\n\nexport const logger = new Logger(PLUGIN_NAME);\n","import type { PluginFunction } from \"@vuepress/core\";\nimport { useSassPalettePlugin } from \"vuepress-plugin-sass-palette\";\nimport {\n  addViteSsrNoExternal,\n  checkVersion,\n  getLocales,\n  isArray,\n  isString,\n} from \"vuepress-shared/node\";\n\nimport { convertOptions } from \"./compact.js\";\nimport { copyCodeLocales } from \"./locales.js\";\nimport type { CopyCodeOptions } from \"./options.js\";\nimport { CLIENT_FOLDER, PLUGIN_NAME, logger } from \"./utils.js\";\n\nexport const copyCodePlugin =\n  (options: CopyCodeOptions = {}, legacy = true): PluginFunction =>\n  (app) => {\n    if (legacy)\n      convertOptions(options as CopyCodeOptions & Record<string, unknown>);\n\n    checkVersion(app, PLUGIN_NAME, \"2.0.0-rc.0\");\n\n    if (app.env.isDebug) logger.info(\"Options:\", options);\n\n    useSassPalettePlugin(app, { id: \"hope\" });\n\n    const userCopyCodeLocales = getLocales({\n      app,\n      name: PLUGIN_NAME,\n      default: copyCodeLocales,\n      config: options.locales,\n    });\n\n    return {\n      name: PLUGIN_NAME,\n\n      define: (): Record<string, unknown> => ({\n        COPY_CODE_DELAY: options.delay || 800,\n        COPY_CODE_DURATION: options.duration || 2000,\n        COPY_CODE_FANCY: options.fancy || false,\n        COPY_CODE_SHOW_IN_MOBILE: options.showInMobile || false,\n        COPY_CODE_LOCALES: userCopyCodeLocales,\n        COPY_CODE_SELECTOR: isArray(options.selector)\n          ? options.selector\n          : isString(options.selector)\n            ? [options.selector]\n            : ['.theme-default-content div[class*=\"language-\"] pre'],\n      }),\n\n      extendsBundlerOptions: (bundlerOptions: unknown, app): void => {\n        addViteSsrNoExternal(bundlerOptions, app, \"vuepress-shared\");\n      },\n\n      clientConfigFile: `${CLIENT_FOLDER}config.js`,\n    };\n  };\n"],"names":["copyCodeLocales","convertOptions","options","deprecatedLogger","droppedLogger","createConverter","__dirname","getDirname","CLIENT_FOLDER","ensureEndingSlash","path","PLUGIN_NAME","logger","Logger","copyCodePlugin","legacy","app","checkVersion","useSassPalettePlugin","userCopyCodeLocales","getLocales","isArray","isString","bundlerOptions","addViteSsrNoExternal"],"mappings":"4SAGO,MAAMA,EAAwC,CACnD,OAAQ,CACN,KAAM,YACN,OAAQ,SACR,KAAM,qBACR,EAEA,OAAQ,CACN,KAAM,OACN,OAAQ,MACR,KAAM,MACR,EAEA,UAAW,CACT,KAAM,OACN,OAAQ,MACR,KAAM,MACR,EAEA,OAAQ,CACN,KAAM,oBACN,OAAQ,UACR,KAAM,sBACR,EAEA,UAAW,CACT,KAAM,oBACN,OAAQ,YACR,KAAM,sBACR,EAEA,OAAQ,CACN,KAAM,gBACN,OAAQ,cACR,KAAM,qBACR,EAEA,OAAQ,CACN,KAAM,gBACN,OAAQ,cACR,KAAM,mBACR,EAEA,OAAQ,CACN,KAAM,kBACN,OAAQ,cACR,KAAM,qBACR,EAEA,OAAQ,CACN,KAAM,kBACN,OAAQ,SACR,KAAM,qBACR,EAEA,OAAQ,CACN,KAAM,cACN,OAAQ,aACR,KAAM,sBACR,EAEA,OAAQ,CACN,KAAM,eACN,OAAQ,cACR,KAAM,qBACR,EAEA,OAAQ,CACN,KAAM,iBACN,OAAQ,QACR,KAAM,mBACR,EAEA,OAAQ,CACN,KAAM,gBACN,OAAQ,UACR,KAAM,mBACR,EAEA,OAAQ,CACN,KAAM,UACN,OAAQ,UACR,KAAM,YACR,EAEA,OAAQ,CACN,KAAM,eACN,OAAQ,aACR,KAAM,sBACR,EAEA,OAAQ,CACN,KAAM,QACN,OAAQ,MACR,KAAM,WACR,EAEA,OAAQ,CACN,KAAM,eACN,OAAQ,WACR,KAAM,wBACR,EAEA,OAAQ,CACN,KAAM,eACN,OAAQ,UACR,KAAM,iBACR,EAEA,OAAQ,CACN,KAAM,aACN,OAAQ,UACR,KAAM,uBACR,EAEA,OAAQ,CACN,KAAM,eACN,OAAQ,aACR,KAAM,sBACR,CACF,ECxHaC,EAAkBC,GAA2C,CACxE,KAAM,CAAE,iBAAAC,EAAkB,cAAAC,CAAc,EAAIC,EAAgB,YAAY,EAExEF,EAAiB,CACf,QAAAD,EACA,IAAK,SACL,IAAK,SACP,CAAC,EACDE,EAAc,CACZ,QAAAF,EACA,IAAK,OACL,IAAK,OACP,CAAC,CACH,ECbMI,EAAYC,EAAW,YAAY,GAAG,EAE/BC,EAAgBC,EAC3BC,EAAK,QAAQJ,EAAW,WAAW,CACrC,EAEaK,EAAc,6BAEdC,EAAS,IAAIC,EAAOF,CAAW,ECI/BG,EACX,CAACZ,EAA2B,CAAC,EAAGa,EAAS,KACxCC,GAAQ,CACHD,GACFd,EAAeC,CAAoD,EAErEe,EAAaD,EAAKL,EAAa,YAAY,EAEvCK,EAAI,IAAI,SAASJ,EAAO,KAAK,WAAYV,CAAO,EAEpDgB,EAAqBF,EAAK,CAAE,GAAI,MAAO,CAAC,EAExC,MAAMG,EAAsBC,EAAW,CACrC,IAAAJ,EACA,KAAML,EACN,QAASX,EACT,OAAQE,EAAQ,OAClB,CAAC,EAED,MAAO,CACL,KAAMS,EAEN,OAAQ,KAAgC,CACtC,gBAAiBT,EAAQ,OAAS,IAClC,mBAAoBA,EAAQ,UAAY,IACxC,gBAAiBA,EAAQ,OAAS,GAClC,yBAA0BA,EAAQ,cAAgB,GAClD,kBAAmBiB,EACnB,mBAAoBE,EAAQnB,EAAQ,QAAQ,EACxCA,EAAQ,SACRoB,EAASpB,EAAQ,QAAQ,EACvB,CAACA,EAAQ,QAAQ,EACjB,CAAC,oDAAoD,CAC7D,GAEA,sBAAuB,CAACqB,EAAyBP,IAAc,CAC7DQ,EAAqBD,EAAgBP,EAAK,iBAAiB,CAC7D,EAEA,iBAAkB,GAAGR,CAAa,WACpC,CACF"}