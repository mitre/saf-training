{"version":3,"file":"index.js","sources":["../../../src/client/compact/components/CodeGroup.ts","../../../src/client/compact/components/VPCard.ts"],"sourcesContent":["import type { Component, FunctionalComponent, SlotsType, VNode } from \"vue\";\nimport { defineComponent, h, onBeforeUpdate, ref, shallowRef } from \"vue\";\n\nimport \"../styles/code-group.scss\";\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\ndeclare const __VUEPRESS_DEV__: boolean;\n\nexport interface CodeGroupItemProps {\n  title: string;\n  active?: boolean;\n}\n\nexport const CodeGroupItem: FunctionalComponent<\n  CodeGroupItemProps,\n  Record<never, never>,\n  { default: () => VNode | VNode[] | undefined }\n> = ({ active = false }, { slots }): VNode =>\n  h(\n    \"div\",\n    {\n      class: [\"code-group-item\", { active }],\n      \"aria-selected\": active,\n    },\n    slots.default?.(),\n  );\n\nCodeGroupItem.displayName = \"CodeGroupItem\";\n\nexport const CodeGroup = defineComponent({\n  name: \"CodeGroup\",\n\n  slots: Object as SlotsType<{\n    default: () => VNode[];\n  }>,\n\n  setup(_props, { slots }) {\n    // index of current active item\n    const activeIndex = ref(-1);\n\n    // refs of the tab buttons\n    const tabRefs = shallowRef<HTMLUListElement[]>([]);\n\n    // after removing a code-group-item, we need to clear the ref\n    // of the removed item to avoid issues caused by HMR\n    if (__VUEPRESS_DEV__)\n      onBeforeUpdate(() => {\n        tabRefs.value = [];\n      });\n\n    // activate next tab\n    const activateNext = (i = activeIndex.value): void => {\n      activeIndex.value = i < tabRefs.value.length - 1 ? i + 1 : 0;\n      tabRefs.value[activeIndex.value].focus();\n    };\n\n    // activate previous tab\n    const activatePrev = (i = activeIndex.value): void => {\n      activeIndex.value = i > 0 ? i - 1 : tabRefs.value.length - 1;\n      tabRefs.value[activeIndex.value].focus();\n    };\n\n    // handle keyboard event\n    const keyboardHandler = (event: KeyboardEvent, i: number): void => {\n      if (event.key === \" \" || event.key === \"Enter\") {\n        event.preventDefault();\n        activeIndex.value = i;\n      } else if (event.key === \"ArrowRight\") {\n        event.preventDefault();\n        activateNext(i);\n      } else if (event.key === \"ArrowLeft\") {\n        event.preventDefault();\n        activatePrev(i);\n      }\n    };\n\n    return (): VNode | null => {\n      // NOTICE: here we put the `slots.default()` inside the render function to make\n      // the slots reactive, otherwise the slot content won’t be changed once the\n      // `setup()` function of current component is called\n\n      // get children code-group-item\n      const items = (slots.default?.() || [])\n        .filter((vNode) => (vNode.type as Component).name === \"CodeGroupItem\")\n        .map((vNode) => {\n          if (vNode.props === null) vNode.props = {};\n\n          return vNode as VNode & { props: Exclude<VNode[\"props\"], null> };\n        });\n\n      // do not render anything if there is no code-group-item\n      if (items.length === 0) return null;\n\n      // if `activeIndex` is invalid\n      if (activeIndex.value < 0 || activeIndex.value > items.length - 1) {\n        // find the index of the code-group-item with `active` props\n        activeIndex.value = items.findIndex((vNode) => \"active\" in vNode.props);\n\n        // if there is no `active` props on code-group-item, set the first item active\n        if (activeIndex.value === -1) activeIndex.value = 0;\n      }\n      // set the active item\n      else {\n        items.forEach((vNode, index) => {\n          vNode.props[\"active\"] = index === activeIndex.value;\n        });\n      }\n\n      return h(\"div\", { class: \"code-group\" }, [\n        h(\n          \"div\",\n          { class: \"code-group-nav\" },\n          items.map((vNode, index) => {\n            const isActive = index === activeIndex.value;\n\n            return h(\n              \"button\",\n              {\n                type: \"button\",\n                ref: (element) => {\n                  if (element) tabRefs.value[index] = <HTMLUListElement>element;\n                },\n                class: [\"code-group-nav-tab\", { active: isActive }],\n                \"aria-pressed\": isActive,\n                \"aria-expanded\": isActive,\n                onClick: () => {\n                  activeIndex.value = index;\n                },\n                onKeydown: (event: KeyboardEvent) =>\n                  keyboardHandler(event, index),\n              },\n              <string[]>vNode.props[\"title\"],\n            );\n          }),\n        ),\n        items,\n      ]);\n    };\n  },\n});\n","import { withBase } from \"@vuepress/client\";\nimport { isLinkExternal } from \"@vuepress/shared\";\nimport type { FunctionalComponent } from \"vue\";\nimport { h } from \"vue\";\nimport { VPLink } from \"vuepress-shared/client\";\n\nimport \"../styles/vp-card.scss\";\n\nexport interface CardProps {\n  /**\n   * Card title\n   *\n   * 卡片标题\n   *\n   */\n  title: string;\n\n  /**\n   * Card description\n   *\n   * 卡片描述\n   */\n  desc?: string;\n\n  /**\n   * Card icon\n   *\n   * 卡片图标\n   */\n  logo?: string;\n\n  /**\n   * Card link\n   *\n   * 卡片链接\n   */\n  link?: string;\n\n  /**\n   * Card background\n   *\n   * 卡片背景\n   */\n  background?: string;\n\n  /**\n   * Card font color\n   *\n   * 卡片字体颜色\n   */\n  color?: string;\n}\n\nexport const VPCard: FunctionalComponent<CardProps> = ({\n  title,\n  desc = \"\",\n  logo,\n  background,\n  color,\n  link,\n}) => {\n  const children = [\n    logo\n      ? h(\"img\", {\n          class: \"vp-card-logo\",\n          src: withBase(logo),\n          loading: \"lazy\",\n          \"no-view\": \"\",\n        })\n      : null,\n    h(\"div\", { class: \"vp-card-content\" }, [\n      h(\"div\", { class: \"vp-card-title\", innerHTML: title }),\n      h(\"hr\"),\n      h(\"div\", { class: \"vp-card-desc\", innerHTML: desc }),\n    ]),\n  ];\n\n  const style: Record<string, string> = {};\n\n  if (background) style[\"background\"] = background;\n  if (color) style[\"color\"] = color;\n\n  return link\n    ? isLinkExternal(link)\n      ? h(\n          \"a\",\n          { class: \"vp-card\", href: link, target: \"_blank\", style },\n          children,\n        )\n      : h(VPLink, { to: link, class: \"vp-card\", style }, () => children)\n    : h(\"div\", { class: \"vp-card\", style }, children);\n};\n\nVPCard.displayName = \"VPCard\";\n"],"names":["CodeGroupItem","active","slots","h","CodeGroup","defineComponent","_props","activeIndex","ref","tabRefs","shallowRef","onBeforeUpdate","activateNext","i","activatePrev","keyboardHandler","event","items","vNode","index","isActive","element","VPCard","title","desc","logo","background","color","link","children","withBase","style","isLinkExternal","VPLink"],"mappings":"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"}