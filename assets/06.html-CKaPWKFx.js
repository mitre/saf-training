import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-CUwJYUKO.js";const t={};function l(h,i){return n(),a("div",null,[...i[0]||(i[0]=[e(`<h2 id="learning-objectives" tabindex="-1"><a class="header-anchor" href="#learning-objectives"><span>Learning Objectives</span></a></h2><ul><li>Understand how to set up a Docker testing environment</li><li>Learn to use Test Kitchen with Docker containers</li><li>Execute and interpret InSpec tests in containers</li><li>Analyze test results using Heimdall Lite</li></ul><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2><ul><li>Docker or Podman installed and running</li><li>Access to required container registries</li><li>Basic understanding of command line operations</li></ul><h2 id="environment-setup" tabindex="-1"><a class="header-anchor" href="#environment-setup"><span>Environment Setup</span></a></h2><p>Before running tests, configure your environment:</p><ol><li>Ensure Docker/Podman is running</li><li>Authenticate with your container registry</li><li>Clone the test profile repository</li><li>Navigate to the profile&#39;s root directory</li><li>Run <code>bundle install</code> to install dependencies</li></ol><h2 id="configure-test-kitchen" tabindex="-1"><a class="header-anchor" href="#configure-test-kitchen"><span>Configure Test Kitchen</span></a></h2><p>Set these environment variables:</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> KITCHEN_LOCAL_YAML</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kitchen</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">container</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">yml</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> VANILLA_CONTAINER_IMAGE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">registry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">access</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">redhat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">com</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ubi8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ubi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">9-1028</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> HARDENED_CONTAINER_IMAGE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">registry1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dso</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">mil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ironbank</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">redhat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ubi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ubi8</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">optional</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> INSPEC_CONTROL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;SV-230222&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here we will be assessing vanilla and hardened container images. While many containers are hosted by Docker themselves on their <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a> platform, organizations often deploy their own container registries. Red Hat makes their registry available at <a href="https://registry.access.redhat.com" target="_blank" rel="noopener noreferrer"><code>registry.access.redhat.com</code></a> - we will be using their <a href="https://developers.redhat.com/blog/2019/10/09/what-is-red-hat-universal-base-image#high_quality__the_security_and_operational_benefits_of_rhel" target="_blank" rel="noopener noreferrer"><code>ubi8</code> image</a>. Iron Bank is Platform One&#39;s hardened container image repository and is available at <a href="https://registry1.dso.mil" target="_blank" rel="noopener noreferrer"><code>registry1.dso.mil</code></a> - they publish a version of the <code>ubi8</code> container that they claim is more hardened than Red Hat&#39;s baseline. Let&#39;s use Red Hat&#39;s <code>ubi8</code> as the vanilla container image and Iron Bank&#39;s <code>ubi8</code> as the hardened container image and validate Iron Bank&#39;s claim of having a more hardened image!</p><h2 id="running-through-the-docker-test-suite" tabindex="-1"><a class="header-anchor" href="#running-through-the-docker-test-suite"><span>Running Through the Docker Test Suite</span></a></h2><ol><li>List the kitchen instances with:</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bundle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  redhat-enterprise-linux-8-stig-baseline</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">main*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bundle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Instance</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       Driver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Provisioner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Verifier</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Transport</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Action</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Error</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vanilla-ubi8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Dokken</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Dummy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        Inspec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Dokken</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;  &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Non</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hardened-ubi8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Dokken</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Dummy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        Inspec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Dokken</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;  &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Non</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Create the kitchen instance:</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bundle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vanilla</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  redhat-enterprise-linux-8-stig-baseline</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">main*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bundle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vanilla</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Starting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kitchen</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (v3.5.1)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Creating</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">vanilla-ubi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">...</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      Creating</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sandbox</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /Users/alippold/.dokken/kitchen_sandbox/de2da32d73-vanilla-ubi8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      Creating</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> verifier</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sandbox</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /Users/alippold/.dokken/verifier_sandbox/de2da32d73-vanilla-ubi8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      Building</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> work</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> image..</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      Creating</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> de2da32d73-vanilla-ubi8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      Finished</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> creating</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">vanilla-ubi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt; (0m0.88s).</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> finished.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (0m1.77s)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Converge the kitchen instance:</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bundle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> converge</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vanilla</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  redhat-enterprise-linux-8-stig-baseline</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">main*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bundle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> converge</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vanilla</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Starting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kitchen</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (v3.5.1)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Converging</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">vanilla-ubi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">...</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">      ...</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      Finished</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> converging</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">vanilla-ubi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt; (0m0.00s).</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> finished.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (0m0.88s)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>Run InSpec on the kitchen instance:</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bundle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> verify</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vanilla</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">➜</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  redhat-enterprise-linux-8-stig-baseline</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">main*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bundle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> verify</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vanilla</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Starting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kitchen</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (v3.5.1)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-----</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Verifying</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">vanilla-ubi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">...</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      Loaded</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redhat-enterprise-linux-8-stig-baseline</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Profile:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   redhat-enterprise-linux-8-stig-baseline</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (redhat-enterprise-linux-8-stig-baseline)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Version:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1.12.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Target:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    docker://c4e89b7406dc0ebf8658fe90d6384d69885a7f07ab9bfbc91c85c64483868c44</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ID:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> da39a3ee-5e6b-5b0d-b255-bfef95601890</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ×</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  SV-230222:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RHEL</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vendor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packaged</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> security</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> patches</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> updates</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> must</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> installed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> date.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (4 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">failed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Profile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Summary:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> successful</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controls,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> control</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> failure,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> controls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> skipped</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Summary:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> successful,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> failures,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> skipped</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>Repeat these steps but replace <code>vanilla</code> with <code>hardened</code>.</li></ol><h3 id="analyzing-results" tabindex="-1"><a class="header-anchor" href="#analyzing-results"><span>Analyzing Results</span></a></h3><ul><li>Results Location: <code>./spec/results/rhel-8_*</code></li><li>Use <a href="https://heimdall-lite.mitre.org" target="_blank" rel="noopener noreferrer">Heimdall Lite</a> to compare results: <ol><li>Load both the <code>vanilla</code> and <code>hardened</code> results</li><li>Use the <code>Comparison View</code> (look for the toggle underneath the files list after selecting the hamburger menu in the top left) to compare the results sets and verify expected passes and failures</li><li>Review corner cases for complete coverage</li></ol></li></ul><h2 id="this-isn-t-the-error-you-re-looking-for-move-along" tabindex="-1"><a class="header-anchor" href="#this-isn-t-the-error-you-re-looking-for-move-along"><span>This isn&#39;t the error you&#39;re looking for, move along</span></a></h2><p>The error below is just Test Kitchen telling you that not all of the <code>controls</code> of the profile passed.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">------Exception-------</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Class:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kitchen::ActionFailed</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Message:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> actions</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> failed.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;&gt;&gt;&gt;&gt;     </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Verify</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> instance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">vanilla-ubi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Please</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> see</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .kitchen/logs/vanilla-ubi8.log</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> more</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> details</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">----------------------</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Please</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> see</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .kitchen/logs/kitchen.log</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> more</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> details</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;&gt;&gt;&gt;&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Also</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> try</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> running</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kitchen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> diagnose </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">--all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> configuration</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,30)])])}const p=s(t,[["render",l]]),d=JSON.parse('{"path":"/courses/profile-dev-test/06.html","title":"6. Testing with Docker Containers","lang":"en-US","frontmatter":{"order":6,"next":"07.md","title":"6. Testing with Docker Containers","author":"Aaron Lippold","description":"Learning Objectives Understand how to set up a Docker testing environment Learn to use Test Kitchen with Docker containers Execute and interpret InSpec tests in containers Analy...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"6. Testing with Docker Containers\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-11T07:37:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Aaron Lippold\\"}]}"],["meta",{"property":"og:url","content":"https://mitre.github.io/saf-training/saf-training/courses/profile-dev-test/06.html"}],["meta",{"property":"og:site_name","content":"MITRE SAF Training"}],["meta",{"property":"og:title","content":"6. Testing with Docker Containers"}],["meta",{"property":"og:description","content":"Learning Objectives Understand how to set up a Docker testing environment Learn to use Test Kitchen with Docker containers Execute and interpret InSpec tests in containers Analy..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-12-11T07:37:42.000Z"}],["meta",{"property":"article:author","content":"Aaron Lippold"}],["meta",{"property":"article:modified_time","content":"2024-12-11T07:37:42.000Z"}]]},"git":{"createdTime":1704493101000,"updatedTime":1733902662000,"contributors":[{"name":"Aaron Lippold","username":"","email":"lippold@gmail.com","commits":3},{"name":"Amndeep Singh Mann","username":"","email":"amann@mitre.org","commits":1}]},"readingTime":{"minutes":2.24,"words":672},"filePathRelative":"courses/profile-dev-test/06.md","autoDesc":true}');export{p as comp,d as data};
