import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as t}from"./app-Cw6QY_M_.js";const r={};function s(o,e){return t(),a("div",null,[...e[0]||(e[0]=[n(`<h2 id="_15-1-running-an-inspec-profile-using-a-local-archive-for-air-gapped-target-systems" tabindex="-1"><a class="header-anchor" href="#_15-1-running-an-inspec-profile-using-a-local-archive-for-air-gapped-target-systems"><span>15.1 Running an InSpec profile using a local archive (for air-gapped target systems)</span></a></h2><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>For more information on how to install InSpec on an air-gapped system use the <a href="https://docs.chef.io/install_chef_air_gap/" target="_blank" rel="noopener noreferrer">chef instructions</a> as guidance</p></div><h2 id="_15-2-prerequisites" tabindex="-1"><a class="header-anchor" href="#_15-2-prerequisites"><span>15.2 Prerequisites</span></a></h2><p>Since a variety of different practices are used to create an air-gapped network, this guide focuses solely on the implementation of Chef software - as such, it makes the following assumptions:</p><ol><li>You have a way to get packages to your air-gapped machines</li><li>Machines on your air-gapped network are able to resolve each other using DNS</li><li>A server’s Fully Qualified Domain Name (FQDN) is the name that will be used by other servers to access it</li><li>You have a private Ruby gem mirror to supply gems as needed</li><li>You have an artifact store for file downloads. At a minimum, it should have the following packages available: <ol><li>Chef Workstation</li><li>Chef Infra Client</li><li>Chef Supermarket</li><li>An <a href="https://docs.chef.io/install_chef_air_gap/#create-an-install-script" target="_blank" rel="noopener noreferrer">install script</a> for Chef Infra Client</li></ol></li></ol><h2 id="_15-3-required-cookbooks" tabindex="-1"><a class="header-anchor" href="#_15-3-required-cookbooks"><span>15.3 Required cookbooks</span></a></h2><p>This guide will link to the required cookbooks for each piece of software in that software’s respective section, but this is a full list of the cookbooks required to complete the entire guide:</p><p>For Chef Supermarket:</p><ul><li><a href="https://supermarket.chef.io/cookbooks/supermarket-omnibus-cookbook" target="_blank" rel="noopener noreferrer">supermarket-omnibus-cookbook</a></li><li><a href="https://supermarket.chef.io/cookbooks/chef-ingredient" target="_blank" rel="noopener noreferrer">chef-ingredient</a></li><li><a href="https://supermarket.chef.io/cookbooks/hostsfile" target="_blank" rel="noopener noreferrer">hostsfile</a></li></ul><h2 id="_15-4-required-gems" tabindex="-1"><a class="header-anchor" href="#_15-4-required-gems"><span>15.4 Required Gems</span></a></h2><p>The following Ruby gems are required to install private Supermarket using the supermarket-omnibus-cookbook:</p><ul><li>mixlib-install</li><li>mixlib-shellout</li><li>mixlib-versioning</li><li>artifactory</li></ul><p>These should be accessible from your Gem mirror.</p><h2 id="_15-5-create-an-install-script" tabindex="-1"><a class="header-anchor" href="#_15-5-create-an-install-script"><span>15.5 Create an install script</span></a></h2><p>An install script is used to install Chef Infra Client when bootstrapping a new node. It simply pulls the Chef Infra Client package from your artifact store, and then installs it. For example, on Debian-based Linux systems, it would look similar to this:</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sh"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /tmp/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://packages.example.com/chef_13.2.20-1_amd64.deb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dpkg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chef_13.2.20-1_amd64.deb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The install script should be accessible from your artifact store.</p>`,17)])])}const c=i(r,[["render",s]]),h=JSON.parse('{"path":"/courses/user/Appendix%20A%20-%20Running%20InSpec%20In%20An%20Airgapped%20Environment.html","title":"Appendix A - Running InSpec In An Airgapped Environment","lang":"en-US","frontmatter":{"order":17,"title":"Appendix A - Running InSpec In An Airgapped Environment","author":"Mo","headerDepth":3,"toc":{"levels":[2,5]},"description":"15.1 Running an InSpec profile using a local archive (for air-gapped target systems) Tips For more information on how to install InSpec on an air-gapped system use the chef inst...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Appendix A - Running InSpec In An Airgapped Environment\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-02T04:04:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mo\\"}]}"],["meta",{"property":"og:url","content":"https://mitre.github.io/saf-training/saf-training/courses/user/Appendix%20A%20-%20Running%20InSpec%20In%20An%20Airgapped%20Environment.html"}],["meta",{"property":"og:site_name","content":"MITRE SAF Training"}],["meta",{"property":"og:title","content":"Appendix A - Running InSpec In An Airgapped Environment"}],["meta",{"property":"og:description","content":"15.1 Running an InSpec profile using a local archive (for air-gapped target systems) Tips For more information on how to install InSpec on an air-gapped system use the chef inst..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-12-02T04:04:58.000Z"}],["meta",{"property":"article:author","content":"Mo"}],["meta",{"property":"article:modified_time","content":"2024-12-02T04:04:58.000Z"}]]},"git":{"createdTime":1733112298000,"updatedTime":1733112298000,"contributors":[{"name":"Shivani Karikar","username":"","email":"karikarshivani@gmail.com","commits":1},{"name":"Aaron Lippold","username":"","email":"lippold@gmail.com","commits":1},{"name":"Will","username":"Will","email":"will@dower.dev","commits":1,"url":"https://github.com/Will"},{"name":"dependabot[bot]","username":"dependabot[bot]","email":"49699333+dependabot[bot]@users.noreply.github.com","commits":1,"url":"https://github.com/dependabot[bot]"},{"name":"wdower","username":"wdower","email":"57142072+wdower@users.noreply.github.com","commits":1,"url":"https://github.com/wdower"}]},"readingTime":{"minutes":1.16,"words":349},"filePathRelative":"courses/user/Appendix A - Running InSpec In An Airgapped Environment.md","autoDesc":true}');export{c as comp,h as data};
